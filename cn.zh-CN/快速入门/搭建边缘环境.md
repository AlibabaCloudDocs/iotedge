# 搭建边缘环境 {#concept_u5m_hkq_32b .concept}

本文将为您介绍如何快速将设备连接到物联网边缘计算控制台，并将设备数据上传至云端。文中我们会以家庭中的光照传感器和客厅灯两种设备的联动为例来介绍设备能力、场景的管理和使用方法。

首先您需要搭建边缘环境，即创建网关用于将设备连接到物联网平台中。

目前支持在以下系统中搭建边缘环境：

-   Windows10 x86\_64
-   MAC x86\_64
-   Ubuntu 18.04 x86\_64
-   Ubuntu 16.04 x86\_64
-   Windows10以下操作系统可以先安装Ubuntu虚拟机，在虚拟机中安装Docker

## 安装Docker {#section_ojq_gry_32b .section}

**Windows10和Mac环境**：

下载并安装Docker客户端。

-    [MAC版Docker客户端](https://docs.docker.com/docker-for-mac/install/#download-docker-for-mac)
-   [Windows 10版Docker客户端](https://docs.docker.com/docker-for-windows/install/#download-docker-for-windows)
-   Ubuntu以外的Linux发行版请至Docker Store下载安装适配您Linux发行版的Docker客户端。

**Ubuntu环境**：

1.  下载并安装Docker客户端。

    `wget -qO- https://get.docker.com/ | sh`

2.  验证Docker是否已经安装成功。

    `sudo docker run hello-world`

    -   若hello world程序正常运行，显示类似如下返回信息，表示Docker已安装成功。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15286/154803679234816_zh-CN.png)

    -   若hello world程序运行异常，请先执行`systemctl status docker`查看Docker服务的运行状态。

        状态为Inavtive时，执行`sudo systemctl start docker`启动Docker服务。


## 创建网关 {#section_wzw_3fz_gfb .section}

1.  以阿里云账号登录[物联网控制台](http://iot.console.aliyun.com/)。
2.  选择**设备管理** \> **产品**，单击**创建产品**。
3.  选择创建**高级版**产品，单击**下一步**，创建名为**边缘计算节点**的网关产品。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15286/15480367926712_zh-CN.png)

    按照界面提示，设置如下参数，参数设置完成后，单击**完成**创建网关产品。

    |参数|描述|
    |--|--|
    |产品名称|此处设置为**边缘计算节点**。|
    |所属分类|此处选择**自定义品类**。|
    |节点类型|此处选择**网关**。|
    |连网方式|为设备选择连网方式，此处选择**WiFi**。|
    |数据格式|设备上下行的数据格式，此处选择**ICA 标准数据格式 \(Alink JSON\)**。Alink JSON是物联网平台高级版为开发者提供的设备与云端的数据交换协议，采用 JSON 格式。|
    |产品描述|您可以自定义，可以为空。|

4.  选择**设备管理** \> **设备**，单击**添加设备**，为**边缘计算节点**添加设备。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15286/15480367926713_zh-CN.png)

    按照界面提示，设置如下参数，参数设置完成后，单击**确认**创建网关设备。

    |参数|描述|
    |--|--|
    |产品|选择已创建的**边缘计算节点**产品。|
    |DeviceName|此处设置网关设备名称为gateway。|

    网关设备添加成功后，请本地保存设备证书信息（ProductKey、DeviceName、DeviceSecret），以备后续部署网关时使用。


## 安装并启动边缘计算节点 {#section_ixl_bff_j2b .section}

1.  下载启动脚本。
    -   Windows或Mac版：

        `curl -O http://link-iot-edge-packet.oss-cn-shanghai.aliyuncs.com/config/link-iot-edge.sh`

    -   Linux版：

        `wget http://link-iot-edge-packet.oss-cn-shanghai.aliyuncs.com/config/link-iot-edge.sh`

2.  启动边缘计算节点。

    `bash link-iot-edge.sh {version} {YourProductKey} {YourDeviceName} {YourDeviceSecret}`

    **说明：** 请将\{version\}替换为最新的[Docker镜像版本号](../../../../../cn.zh-CN/产品简介/发布历史.md#)，将\{YourProductKey\} \{YourDeviceName\} \{YourDeviceSecret\}替换为已在本地保存的gateway网关设备的设备证书信息。

    例如，镜像版本号为v1.8，网关设备证书信息为ProductKey：a1\*\*\*\*\*\*gs、DeviceName：gateway、DeviceSecret：2Px\*\*\*\*\*\*\*\*\*\*\*\*\*\*H1S，则执行的实际命令如下：

    `bash link-iot-edge.sh v1.8 a1******gs gateway 2Px**************H1S`

    命令执行完成后，系统显示如下图信息，表示启动边缘计算节点成功。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15286/154803679234851_zh-CN.png)

3.  在[物联网控制台](http://iot.console.aliyun.com/)，选择**设备管理** \> **设备**，选择已创建好的边缘计算节点产品，查看网关状态。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15286/15480367926743_zh-CN.png)


