添加集成Link SDK的设备 
====================================

对于集成了阿里云设备接入Link SDK的设备，物联网边缘计算提供LinkDriver驱动，将此类设备连接到边缘一体机，实现与云端的通信。

前提条件 
-------------------------

* 已下载并集成Link SDK到您的设备。具体操作，请参见[设备接入Link SDK文档](https://help.aliyun.com/document_detail/96596.html#concept-2050347)。

  

* 已完成操作：[分配驱动到主机](/cn.zh-CN/设备接入/设备管理/添加驱动关联设备/分配驱动到主机.md)。

  




修改Link SDK 
-------------------------------

使用LinkDriver驱动之前，需要修改设备上的Link SDK内容，使设备能够连接到边缘一体机。

本文以最新版C语言Link SDK为例，说明修改方法。其它语言Link SDK请参考C语言内容修改。

1. 打开C语言Link SDK的`demos/mqtt_basic_demo.c`文件。

   

2. 按照下图红框所示的说明，修改接入MQTT的参数值。

   **注意**

   其中，将IP地址`192.168.56.102`替换为您的边缘一体机IP地址`192.168.100.198`，其余参数设置与图片内容保持一致。

   ![linkkit接入mqtt信息1 ](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0205489061/p81754.png)
   

3. 保存修改的内容，然后重新编译Link SDK并更新到设备上。详细操作，请参见[Link SDK文档](https://help.aliyun.com/document_detail/163755.html#topic2747)。

   




添加集成Link SDK的设备 
------------------------------------

1. 登录[边缘计算控制台](https://iotedge.console.aliyun.com)。

   

2. 在左侧导航栏选择 **节点管理** \> **终端设备管理** 。

   

3. 在 **终端设备管理** 页面，选择 ***您的目标主机名称*** \> **通用设备** \> ***您的目标驱动名称*** 。

   

4. 在 **设备列表** 区域下，单击 **添加设备** ，在弹出的 **添加设备** 对话框中，单击 **所属产品** 下的 **打开产品管理页** 。

   ![新版-LinkDriver驱动下添加设备](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2120906261/p214126.png)
   

5. 系统跳转到[物联网平台控制台](http://iot.console.aliyun.com/)，创建 **节点类型** 为 **网关子设备** 、 **接入网关协议** 为 **自定义** 的产品，其余参数可自定义设置或保持默认值。详细操作，请参见[创建产品](/cn.zh-CN/设备接入/创建产品.md)。

   

6. （可选）创建产品完成后，您可以为产品添加物模型。详情操作，请参见[物模型](/cn.zh-CN/设备管理/物模型/物模型概述/什么是物模型.md)。

   

7. 返回[边缘计算控制台](https://iotedge.console.aliyun.com)的 **节点管理** \> **终端设备管理** 页面。在 **添加设备** 对话框中，为刚刚创建的产品添加设备。

   设置 **设备名称** 和 **备注名称** ，然后单击 **确定** 。
   

8. 在左侧导航栏选择 **节点管理** \> **主机管理** ，找到刚刚分配了设备的主机名称，单击对应 **操作** 列中的 **主机部署** ，部署终端设备到边缘一体机。更多部署相关信息，请参见[主机部署和管理](/cn.zh-CN/主机管理/云端管理/主机部署和管理.md)。

   

9. 部署完成后，可查看驱动的运行数据和日志。

   1. 登录边缘一体机。

      您可以使用SSH直接登录边缘一体机，或通过远程SSH终端，登录边缘一体机。远程SSH终端相关介绍，请参见[远程服务访问](/cn.zh-CN/主机管理/云端管理/远程运维管理/远程服务访问.md)。
      
   
   2. 进入LinkDriver驱动文件所在目录，查看驱动日志。

          cd /linkedge/run/logger/fc-base/LinkDriver 

      
   

   



