添加OPC UA协议设备 
=================================

物联网边缘计算支持通过关联OPC UA驱动，关联OPC UA协议的终端设备到边缘一体机。

前提条件 
-------------------------

已完成操作：[分配驱动到主机](/cn.zh-CN/设备接入/设备管理/添加驱动关联设备/分配驱动到主机.md)。

操作步骤 
-------------------------

1. 登录[边缘计算控制台](https://iotedge.console.aliyun.com)。

   

2. 在左侧导航栏选择 **节点管理** \> **终端设备管理** 。

   

3. 在 **终端设备管理** 页面，选择 ***您的目标主机名称*** \> **通用设备** \> ***您的目标驱动名称*** 。

   

4. 在 **设备列表** 区域下，单击 **添加设备** ，在弹出的 **添加设备** 对话框中，单击 **所属产品** 下的 **打开产品管理页** 。

   

5. 系统跳转到[物联网平台控制台](http://iot.console.aliyun.com/)，创建 **节点类型** 为 **网关子设备** 、 **接入网关协议** 为 **OPC UA** 的产品。详细操作，请参见[创建产品](/cn.zh-CN/设备接入/创建产品.md)。

   

6. 返回[边缘计算控制台](https://iotedge.console.aliyun.com)的 **节点管理** \> **终端设备管理** 页面。在 **添加设备** 对话框中，为刚刚创建的产品添加设备。

   设置 **设备名称** 和 **备注名称** ，然后单击 **确定** 。
   

7. 在 **设备列表** 区域框下，单击 **驱动配置** ，添加边缘一体机与设备之间通信的通道。

   1. 在弹出面板中单击 **添加通道** 。

      ![新版-添加OPCUA通道 ](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2744906261/p173537.png)
      
   
   2. 根据界面提示设置参数，然后单击 **确定** 。

      

      |    参数    |                            描述                             |
      |----------|-----------------------------------------------------------|
      | 通道名称     | 需在该边缘一体机维度具有唯一性。支持中文、英文字母、数字和下划线（_），长度限制1\~30个字符，中文算2个字符。 |
      | 通道地址     | OPC UA Server的URL地址。例如`opc.tcp://localhost:4840`。         |
      | 安全策略     | 加密算法策略。包含 **无** 、 **Basic128Rsa15** 、 **Basic256** 三种。    |
      | 安全模式     | 签名类型。包含 **无** 、 **Sign** 、 **SignAndEncrypt** 三种。         |
      | 用户名      | 非必填。                                                      |
      | 密码       | 非必填。                                                      |
      | 方法调用超时时间 | 单位为秒。                                                     |

      
   

   

8. 单击设备名称对应 **操作** 列中的 **设备配置** ，通过关联通道，关联设备与OPC UA驱动。

   ![新版-OPCUA设备配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2744906261/p173545.png)
   

   |  参数  |                                                             描述                                                              |
   |------|-----------------------------------------------------------------------------------------------------------------------------|
   | 关联通道 | 选择步骤7中添加好的通道。                                                                                                               |
   | 节点路径 | 设备在OPC UA Server中，从Objects开始到设备节点的绝对路径。OPC UA Server相关说明，请参见[OPC UA设备接入实践](/cn.zh-CN/最佳实践/OPC UA设备接入实践.md)。 |

   

9. 在左侧导航栏选择 **节点管理** \> **主机管理** ，找到刚刚分配了设备的主机名称，单击对应 **操作** 列中的 **主机部署** ，部署终端设备到边缘一体机。更多部署相关信息，请参见[主机部署和管理](/cn.zh-CN/主机管理/云端管理/主机部署和管理.md)。

   



