添加WebSocket协议设备 
====================================

物联网边缘计算支持通过关联WebSocket驱动，关联WebSocket协议的终端设备到边缘一体机。

前提条件 
-------------------------

已完成操作：[分配驱动到主机](/cn.zh-CN/设备接入/设备管理/添加驱动关联设备/分配驱动到主机.md)。

操作步骤 
-------------------------

1. 登录[边缘计算控制台](https://iotedge.console.aliyun.com)。

   

2. 在左侧导航栏选择 **节点管理** \> **终端设备管理** 。

   

3. 在 **终端设备管理** 页面，选择 ***您的目标主机名称*** \> **通用设备** \> ***您的目标驱动名称*** 。

   

4. 在 **设备列表** 区域下，单击 **添加设备** 。

   

5. 在弹出的 **添加设备** 对话框中，单击 **所属产品** 下的 **打开产品管理页** 。

   

6. 系统跳转到[物联网平台控制台](http://iot.console.aliyun.com/)，创建 **节点类型** 为 **网关子设备** 、 **接入网关协议** 为 **自定义** 的产品。操作详情请，参见[创建产品](/cn.zh-CN/设备接入/创建产品.md)。

   

7. 返回[边缘计算控制台](https://iotedge.console.aliyun.com)的 **节点管理** \> **终端设备管理** 页面。在 **添加设备** 对话框中，为刚刚创建的产品添加设备。

   设置 **设备名称** 和 **备注名称** ，然后单击 **确定** 。
   

8. 在 **设备列表** 区域下，单击 **驱动配置** ，在 **驱动配置** 对话框，根据界面提示设置参数，然后单击 **确定** 。

   ![新版-websocket驱动配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8554906261/p173565.png)
   

   |  参数  |                                                                                                                  描述                                                                                                                   |
   |------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | IP地址 | WebSocket驱动监听地址，默认为驱动所在机器的IP地址。                                                                                                                                                                                                       |
   | 端口号  | WebSocket驱动监听端口，范围为1 \~ 65535，默认端口为17682。                                                                                                                                                                                             |
   | 是否加密 | 是否使用TLS加密，默认不加密。若选择是，需要上传公钥和私钥文件。 * **公钥文件** ：上传公钥证书文件，证书文件格式必须为`.cer`，名称不支持中文字符。   * **私钥文件** ：上传私钥文件，文件格式必须为`.pvk`，名称不支持中文字符。    |

   

9. （可选）单击设备名称对应 **操作** 列中的 **设备配置** ，关联设备与WebSocket驱动。

   ![新版-websocket设备配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3909385261/p173580.png)

   **设备IP** ：接入设备或设备所在边缘一体机的IP。
   **说明**

   如果配置了该参数，则物联网边缘计算会严格校验IP。仅允许来自该IP地址的指定设备接入。
   

10. 在左侧导航栏选择 **节点管理** \> **主机管理** ，找到刚刚分配了设备的主机名称，单击对应 **操作** 列中的 **主机部署** ，部署终端设备到边缘一体机。更多部署相关信息，请参见[主机部署和管理](/cn.zh-CN/主机管理/云端管理/主机部署和管理.md)。

    



