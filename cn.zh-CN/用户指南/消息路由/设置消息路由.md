# 设置消息路由 {#task_h1h_mdy_32b .task}

消息路由即通过路由规则动态规划消息的传输路径，使消息按照过滤条件，从消息源路由到目标节点。

消息路由需在边缘分组中设置。您需在设置消息路由之前，先创建边缘分组，并为该分组分配网关\(仅支持高级版）、设备（仅支持高级版）和函数。

1.  登录[物联网平台控制台](https://iot.console.aliyun.com/)。 
2.  在左侧导航栏中，单击**边缘管理** \> **边缘分组**。 
3.  找到您要设置消息路由的分组，单击操作栏中的**查看**按钮，即进入分组详情页。 
4.   在分组详情页面，单击**消息路由** \> **添加路由**，进入如下界面。![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15106/6547_zh-CN.png)

 
5.  设置消息路由路径。 
    -   消息来源：消息的发送者。目前支持消息来源为设备和函数计算。

        -   选择消息来源为**设备**，则需要选择已分配到该边缘分组的设备的名称和设备所属的产品名称。
            -   选择**全部产品**，表示消息来源为已分配到该边缘分组的所有设备。
            -   在选择具体的产品名称后，选择设备为**全部设备**，表示消息来源为该产品下已分配到该边缘分组的所有设备。
        -   如果选择消息来源为**函数计算**，则需选择已分配给该边缘分组的函数名称。
    -   TopicFilter：消息来源发出消息的过滤条件。只有满足此条件的消息才能到达消息目标。

        TopicFilter 根据消息来源不同，设置方法不同。

        -   消息来源为设备时，TopicFilter 过滤条件可以选择为**属性**或**全部**。
        -   消息来源为函数计算时，TopicFilter 过滤条件需要您进行自定义。自定义 TopicFilter 时，可使用通配符。TopicFilter 的定义方法，请参见[什么是Topic](../../../../cn.zh-CN/用户指南/创建产品与设备/Topic/什么是Topic.md#) 和 [Topic 列表](../../../../cn.zh-CN/用户指南/创建产品与设备/Topic/Topic列表.md#)。
    -   消息目标：消息的接收者。目前支持消息目标为 IoT Hub 和函数计算。

        -   选择为 **IoT Hub** （IoT Hub 即云端），表示消息需要上传到云端。
        -   选择为**函数计算**，则需要指定函数的名称。

