---
keyword: [驱动发布, 云端发布]
---

# 云端发布

驱动支持云端发布和内置发布两种形式，云端发布驱动是将驱动文件托管到控制台中驱动管理页面，内置发布是将驱动内置到网关。本文主要描述通过云端发布驱动的步骤。

-   您完成了驱动的开发，具体操作步骤请参见[驱动编码](/cn.zh-CN/用户指南/设备接入/驱动开发/驱动编码.md)。
-   您已打包了已开发的驱动。详情请参见[驱动打包注意事项](/cn.zh-CN/用户指南/设备接入/驱动开发/驱动调试.md)。

## 操作步骤

1.  登录[边缘计算控制台](https://iot.console.aliyun.com/le/instance/list)，在左侧导航栏单击**驱动管理**。

2.  在驱动管理页面自研驱动页签下，单击的**新建驱动**。

3.  在**新建驱动**页面，根据提示设置驱动参数。

    -   驱动信息

        ![新增驱动](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/7743119951/p38388.png)

        |参数|描述|
        |--|--|
        |驱动名称|自定义驱动的名称。支持大小写英文字母、数字和英文下划线（\_），必须以英文字母开头，不超过20个字符。|
        |通信协议类型|驱动开发所依赖的行业标准通信协议。当前支持的协议类型有Modbus、OPCUA、LoRa WAN和自定义。|
        |语言类型|驱动的语言类型，支持Node.js 8、Python 3.5、C和Java 8类型。 其中，若选择C类型，则还需要选择驱动的CPU架构。 |
        |驱动是否内置|选择是否内置驱动文件。         -   是：无需上传驱动文件，使用本地内置驱动。详情请见[内置发布](/cn.zh-CN/用户指南/设备接入/驱动发布/内置发布.md)。
        -   否：需要上传驱动文件，通过云端部署通道直接部署驱动。
云端发布必须选择否。 |
        |驱动文件|驱动是否内置选择否后，单击**上传文件**，上传您的驱动文件。 **说明：** 仅支持上传.zip格式的文件，文件大小不能超过50 MB。 |
        |驱动版本|设置驱动的版本，必须是该驱动唯一的版本号，即一个驱动不可以设置两个相同的版本号。|
        |驱动适配的边缘版本|选择驱动适配的边缘版本，即该驱动只能在该边缘版本及以上版本的网关中运行。|
        |驱动版本描述|描述您创建的驱动，可以为空。|

    -   驱动配置

        ![云端发布-驱动配置](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/3699059851/p73189.png)

        |参数|描述|
        |--|--|
        |配置格式|配置格式有如下三种：         -   键值对配置
        -   JSON格式
        -   配置文件 |
        |配置格式为键值对配置时|单击**新增配置**，通过设置配置名称、值、注释来配置驱动。 最多添加100个键值对。 |
        |配置格式为JSON格式时|编写JSON格式配置内容，内容不超过1 KB。编写内容时，系统自动校验格式。若格式错误，可根据系统提示编写正确格式的内容。|
        |配置格式为配置文件时|需要在本地编写配置文件，并上传。|

    -   容器配置

        ![云端发布驱动-容器配置](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/3699059851/p73204.png)

        |参数|描述|
        |--|--|
        |是否使用宿主机host模式|选择是否隔离容器的网络。直接使用宿主机网络环境。         -   是：表示不隔离容器的网络，直接使用宿主机网络环境。
        -   否：表示隔离容器的网络，需要设置网络端口映射。 |
        |网络端口映射|当是否使用宿主机host模式为否时出现的参数。函数的网络环境和宿主机的环境是完全隔离的。通过网络端口映射，将容器内函数的监听端口映射到宿主机的某一个端口上，实现不同主机上的客户端程序，能够访问该函数提供的服务。最多支持映射10条网络端口。 例如，运行在宿主机容器内的`fc-http-server`函数，通过80端口对外界提供服务。此时，其它主机上的客户端程序，无法通过访问宿主机的80端口，访问到`fc-http-server`函数。因此需要将`fc-http-server`函数所在的容器端口映射到宿主机的某一个端口上（例如将容器内的80端口映射到宿主机8080端口），允许其它主机上的客户端程序通过访问`宿主机的IP地址：8080`，访问到容器内部的`fc-http-server`函数。 |
        |是否启动特权模式|容器内的root用户实际上只是宿主机的一个普通用户。若在容器内部做修改系统时间、使用mount命令等需要root权限的操作，则需要赋予容器privileged特权。

**说明：** 特权模式下，容器内部拥有宿主机的root权限，而且宿主机的所有设备会默认映射到容器内部，即无需配置设备映射。 |
        |设备映射|当是否启动特权模式为否时出现的参数。设备管理系统和宿主机的环境是完全隔离的。当一个函数需要访问宿主机的设备（例如串口）时，需要将设备映射到运行函数的容器内部。最多可添加10个设备映射。|
        |卷映射|文件系统和宿主机的环境是完全隔离的。当一个函数需要访问宿主机的文件时，需要将文件映射到运行函数的容器内部。最多可添加10个卷映射。|
        |内存限制|设置容器的内存上限。 当容器内存使用超过限制时，容器会被重启。如果内存限制值过小，可能会导致容器内的应用运行失败。默认内存为1024 MB，请根据容器内应用大小，上调内存限制。|

    -   配置校验

        ![配置校验](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/3699059851/p73214.png)

        |参数|描述|
        |--|--|
        |驱动配置|勾选表示将该驱动配置到边缘实例并关联子设备后，必须设置**驱动配置**，才可以将驱动部署到边缘实例。|
        |设备配置|勾选表示将该驱动配置到边缘实例并关联子设备后，必须设置**设备配置**，才可以将驱动部署到边缘实例。|

4.  完成参数的设置并上传成功驱动文件后，单击**确认**。您可以在自研驱动页签中看到刚刚创建的驱动。


## 相关操作

1.  在驱动管理页面**自研驱动**页签，单击驱动操作栏中的**版本管理**。

    ![驱动版本管理](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4699059851/p76055.png)

2.  在**版本管理**面板，单击相关操作按钮，管理该驱动的版本信息。

    |操作|描述|
    |--|--|
    |新增版本|单击**新增版本**，可为该驱动增加新版本，详细操作及参数说明请参见本文上方[设置驱动参数步骤](#step_xn7_043_29g)。|
    |发布|单击**发布**，在弹出的**确认发布驱动版本**对话框，确认发布驱动信息后，单击**发布**。 **说明：** 驱动发布成功后，不可以删除该版本驱动，只能查看或下载该版本驱动。 |
    |编辑|驱动版本的状态为未发布时才有的操作按钮。单击**编辑**，可修改该版本驱动的信息，参数说明请参见本文上方[设置驱动参数步骤](#step_xn7_043_29g)。|
    |下载|单击**下载**，可下载该版本驱动文件。|
    |删除|驱动版本的状态为未发布时才有的操作按钮。单击**删除**，可删除该版本驱动。|
    |查看|驱动版本的状态为已发布时才有的操作按钮。单击**查看**，可查看该版本驱动信息，也可以修改该版本驱动信息，参数说明请参见本文上方[设置驱动参数步骤](#step_xn7_043_29g)。|

3.  （可选）单击驱动操作栏中的**上架**，可将自研驱动作为商品，上架到物联网市场。上架驱动操作请参见[驱动市场](/cn.zh-CN/用户指南/生态合作/驱动市场.md)。

4.  在云端发布驱动后，即可将驱动分配到边缘实例，关联子设备，通过边缘实例的部署，将驱动和子设备部署到边缘端。详情请参见[驱动调试](/cn.zh-CN/用户指南/设备接入/驱动开发/驱动调试.md)。


